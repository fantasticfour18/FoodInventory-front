<div id="overlay" *ngIf="isLoading">
    <div class="overlay-content">
        <div class="spinner-border"></div>
    </div>
</div>

<div class="container">
    <div class="row pb-5">
        <div class="col-sm-12 logo d-flex">
          <a routerLink="/" class="m-auto"><img src="data:image/png;base64,{{this.logoService.getLogo()}}" alt=""></a>
        </div>
        <div class="col-sm-12 col-md-8 col-lg-4 col-11 p-4 mx-auto reg-box bg-white">
            <div class="container">
                <div class="row align-items-center justify-content-center">
                    <div class="col-md-12">
                        <div class="text-center mb-3">
                            <!-- <p><strong><a routerLink="/login" class="anchor-text">Ich bin bereits Mitglied</a></strong></p> -->
                            <div class="delivery-type-section mb-4 mx-auto w-90 mw-100" *ngIf="__cartService.deliveryType =='DELIVERY'">
                                <div class='w-50 float-left'>
                                    <!--<input type="radio" [checked]="this.__cartService.deliveryType=='DELIVERY'" disabled class="d-none delivery-selection" name="delivery_type" id="collection">-->
                                    <label [ngClass]="deliveryType=='DELIVERY' ? 'delivery-selection-label-active' : ''" >
                                        <span><img src="assets/icons/delivery-grn.svg"></span> <!-- Delivery -->Lieferung
                                    </label>
                                </div>
                                <div class='w-50 float-left'>
                                    <!--<input type="radio" [checked]="this.__cartService.deliveryType=='PICKUP'" disabled class="d-none delivery-selection" name="delivery_type" id="delivery">-->
                                    <label [ngClass]="deliveryType=='PICKUP' ? 'delivery-selection-label-active' : ''">
                                        <span><img src="assets/icons/collection-grn.svg"></span>Sammlung <!-- Collection -->
                                    </label>
                                </div>
                            </div>
                            <!-- <div class="">
                                <p><strong>
                                  Einloggen</strong></p>
                                <a (click)="signInWithGoogle()" class="btn py-2 btn-google text-white">
                                    <span><img src="assets/icons/gplus.png"></span>Mit Google anmelden
                                </a>
                                <span class="text-center my-1 d-block" style="font-weight: 400!important;">oder</span>
                                <a (click)="signInWithFB()" class="btn py-2 btn-facebook text-white">
                                    <span><img src="assets/icons/facebook-logo.png"></span>Mit Facebook einloggen
                                </a>
                            </div>
                            <span class="text-center mt-3 d-block" style="font-weight: 400 !important;">oder</span> -->
                            <h2 class=""><strong><!-- Checkout as a Guest -->Als Gast zur Kasse gehen</strong></h2>
                        </div>
                      <!--<p class='text-danger' *ngIf="message">{{message}}</p>-->
                        <div *ngIf="message">
                          <mat-chip-list  aria-label="Error Message">
                            <mat-chip color="warn" selected class="error-chip">{{message}}</mat-chip>
                          </mat-chip-list>
                          <br>
                        </div>
                        <form action="#" method="post" [formGroup]="registerForm">
                          <div style="padding-bottom: 10px; color: #707070;">
                            <span class="inputRequired">*&nbsp;&nbsp;</span>
                            <span style="text-decoration: underline">
                                Diese Felder sind Pflichtfelder<!-- These fields are required --></span>
                          </div>

                            <div class="row">
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="firstName"><strong><!-- First Name -->Vorname</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                                        <input type="text" formControlName="firstName" class="form-control" id="firstName" #firstName>
                                    </div>
                                    <div *ngIf="(registerForm.get('firstName').touched || registerForm.get('firstName').dirty)
                                      && !registerForm.get('firstName').valid" class="errorMsg">
                                      <!-- Please enter valid name. -->Bitte geben Sie einen gültigen Namen ein.
                                    </div>
                                </div>
                                <div class="col-sm-6">
                                    <div class="form-group">
                                        <label for="lastName"><strong>Nachname<!-- Last Name --></strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                                        <input type="text" formControlName="lastName" class="form-control" id="lastName" #lastName>
                                    </div>
                                    <div *ngIf="(registerForm.get('lastName').touched || registerForm.get('lastName').dirty)
                                      && !registerForm.get('lastName').valid" class="errorMsg">
                                      <!-- Please enter valid name. -->Bitte geben Sie einen gültigen Namen ein.
                                    </div>
                                </div>
                            </div>
                            <div class="form-group last mb-3">
                                <label for="email"><strong><!-- Your -->Ihre Email</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                                <input type="email" formControlName="email" class="form-control" id="email" #email>
                            </div>
                            <div *ngIf="(registerForm.get('email').touched || registerForm.get('email').dirty)
                              && !registerForm.get('email').valid" class="errorMsg">
                              <!-- Please enter valid email -->Bitte eine gültige Email eingeben.
                            </div>

                            <div class="form-group last mb-3">
                                <label for="mobile"><strong><!-- Your Mobile -->Dein Handy</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                                <input type="text" formControlName="contact" class="form-control" id="mobile" #mobile>
                            </div>
                            <div *ngIf="(registerForm.get('contact').touched || registerForm.get('contact').dirty)
                              && !registerForm.get('contact').valid" class="errorMsg">
                              <!-- Please enter valid mobile number (10 digits). -->Bitte geben Sie eine gültige Handynummer ein.
                            </div>

                            <!-- <div class="form-group last mb-3">
                                <label for="password"><strong>Passwort</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                                <input type="password" formControlName="password" class="form-control" id="password" #password>
                            </div>
                            <div *ngIf="(registerForm.get('password').touched || registerForm.get('password').dirty)
                              && !registerForm.get('password').valid" class="errorMsg">
                              Bitte Passwort eingeben.
                            </div> -->

                            <div class="form-group last mb-3" *ngIf="__cartService.deliveryType =='DELIVERY'">
                              <label for="house"><strong><!-- House Number -->Hausnummer</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                              <input type="text" formControlName="houseNumber" class="form-control" id="house" #house>
                            </div>
                            <div *ngIf="(registerForm.get('houseNumber').touched || registerForm.get('houseNumber').dirty)
                              && !registerForm.get('houseNumber').valid" class="errorMsg">
                              <!-- Please enter House Number. -->Bitte Hausnummer eingeben..
                            </div>

                            <div class="form-group last mb-3" *ngIf="__cartService.deliveryType =='DELIVERY'">
                              <label for="street"><strong><!-- Street -->Straße</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                              <input type="text" formControlName="street" class="form-control" id="street" #street>
                            </div>
                            <div *ngIf="(registerForm.get('street').touched || registerForm.get('street').dirty)
                              && !registerForm.get('street').valid" class="errorMsg">
                              <!-- Please enter street. -->Bitte Straße eingeben..
                            </div>

                            <div class="form-group last mb-3" *ngIf="__cartService.deliveryType =='DELIVERY'">
                                <label for="city"><strong>Stadt</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                                <input type="text" formControlName="city" class="form-control" id="city" #city>
                            </div>
                            <div *ngIf="(registerForm.get('city').touched || registerForm.get('city').dirty)
                              && !registerForm.get('city').valid" class="errorMsg">
                                  Bitte Stadt eingeben..
                            </div>

                            <!-- <div class="form-group last mb-3">
                              <label for="address"><strong>Die Anschrift</strong> <span class="inputRequired">&nbsp;&nbsp;*</span></label>
                              <input type="text" formControlName="address" class="form-control" id="address" #address>
                            </div>
                            <div *ngIf="(registerForm.get('address').touched || registerForm.get('address').dirty)
                              && !registerForm.get('address').valid" class="errorMsg">
                                Bitte geben Sie eine gültige Adresse ein.
                            </div> -->

                            <div class="form-group last mb-3" *ngIf="__cartService.deliveryType =='DELIVERY'">
                                <label for="postcode"><strong>Postleitzahl</strong></label>
                                <input style="resize: none;" type="text" formControlName="postcode" class="form-control" id="postcode">
                            </div>

                            <button *ngIf="__cartService.deliveryType == 'PICKUP'; else deliveryButton" type="button" value="Log In" (click)="registerUser()" class="btn btn-block py-2 btn-primary"
                              [disabled]="!registerForm.get('firstName').valid || !registerForm.get('lastName').valid
                              || !registerForm.get('email').valid">
                              <!-- Go to Payment -->Gehe zu Zahlung
                            </button>

                          <ng-template #deliveryButton>
                            <button type="button" value="Log In" (click)="registerUser()" class="btn btn-block py-2 btn-primary"
                            [disabled]="!registerForm.get('firstName').valid || !registerForm.get('lastName').valid
                          || !registerForm.get('email').valid || !registerForm.get('houseNumber').value
                          || !registerForm.get('street').value || !registerForm.get('city').value
                          "><!-- Go to Payment -->Gehe zu Zahlung</button>
                          </ng-template>

                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
